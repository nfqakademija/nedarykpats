{% extends 'base.html.twig' %}

{% block title %}Mano skelbimai{% endblock %}

{% block body %}

    <div class="Content Content--top">
        <div class="Content-Block">
            {#{% include 'components/filter_bar.html.twig' with {'header' : ''} %}#}
        </div>
    </div>

    <div class="Content Content--GreyBg">
        <div class="Content-Block u-padding-top">

            {% block ads %}
                {% if filteredAdverts|length < 1 %}
                    <div class="Message Message--empty">
                        <img class="Message-img" src="/img/worker-empty.png" alt="" />
                        <p class="Message-text">Jūs skelbimų neturite!</p>
                    </div>
                {% endif %}

                <section id="Ads" class="LayoutLine">

                    {% for advert in filteredAdverts %}

                        <section class="LayoutLine-item LayoutLine-item--link"
                                 onclick="location.href = '{{ path('advert', {'id': advert.id }) }}'">

                            <div class="LayoutLine-leftSide">
                                {#TODO: prideti stausa#}
                                <div class="Bid Bid--center">
                                {% if advert.getOffersCount()  > 0 %}
                                    <span class="Bid-header">Aplikavo</span>
                                    <span class="Bid-count">{{ advert.getOffersCount() }}</span>
                                    {% else %}
                                    <span class="Bid-header">&#8203;</span>
                                    <span class="Bid-count">&#8203;</span>
                                    {% endif %}
                                </div>
                            </div>

                            <div class="LayoutLine-title">
                                <h3 class="Header">{{ advert.title }}</h3>
                                <div> {{ advert.createdAt|date("Y-m-d") }} </div>
                                <p class="u-lineCount-1">{{ advert.text }}</p>
                            </div>

                            <div class="LayoutLine-rightSide">
                                <div class="Button Button--default u-margin-around"><i class="fas fa-edit"></i> Tikrinti</div>
                                <div class="Button Button--default Button--red u-margin-around"><i class="fas fa-times"></i> Trinti</div>
                                {#TODO: netrinti, mygtukas bus naudojamas atsiradus duomenu istraukimo logikai#}
                                {#<div class="Button Button--default Button--yellow u-margin-around"><i class="fas fa-star"></i> Vertinti</div>#}
                            </div>
                        </section>

                    {% endfor %}

                </section>

                {% if paginationPages > 1 %}
                    <section>
                        <ul class="Pagination u-align-center">

                            <li><a href="?filter={{ selectedCategorySlugs|join(',') }}&page={{ page - 1 }}#FilterBar" class="Pagination-item Pagination-prev{{ (page == 1) ? ' is-unavailable' : '' }}">&laquo</a></li>

                            {% for i in 1..paginationPages %}
                                <li><a href="?filter={{ selectedCategorySlugs|join(',') }}&page={{ i }}#FilterBar" class="Pagination-item  {{ page == i? "is-active" }} "> {{ i }}</a></li>
                            {% endfor %}

                            <li><a href="?filter={{ selectedCategorySlugs|join(',') }}&page={{ page + 1 }}#FilterBar" class="Pagination-item Pagination-next {{ (paginationPages == page) ? ' is-unavailable' : '' }}">&raquo;</a></li>
                        </ul>
                    </section>
                {% endif %}

            {% endblock %}
        </div>
    </div>

    <script>
        var usingVersionedFileJs = true;
        var usingReactApp = true;
    </script>

    {{ parent() }}

{% endblock %}
